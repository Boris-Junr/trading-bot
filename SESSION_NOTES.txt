================================================================================
TRADING BOT - CURRENT SESSION STATUS
================================================================================
Last Updated: 2025-11-18
Project Phase: Active Development
================================================================================

CURRENT STATE
================================================================================

The trading bot is a full-stack application combining:
- Backend: Python FastAPI with ML predictions, backtesting, and resource management
- Frontend: Vue 3 + TypeScript with modern glassmorphic UI
- Status: Functional with multiple strategies, dynamic symbol selection, and comprehensive backtest tracking

RECENT MAJOR UPDATES (2025-11-18)
================================================================================

1. DYNAMIC SYMBOL SELECTION SYSTEM
   - Centralized trading pairs configuration at: backend/domain/config/trading_pairs.py
   - 19 total symbols: 8 crypto, 5 forex, 6 indices
   - All dropdowns (Backtests, Predictions, Strategies) now dynamically load symbols
   - Symbol format: UI displays BTC/USDT, backend uses BTC_USDT

2. STRATEGY AUTO-DISCOVERY
   - Strategies auto-register via registry system
   - No manual updates needed when adding new strategies
   - Current strategies:
     * MLPredictive (ML-based predictions with pre-filter optimization)
     * BreakoutScalping (Range breakout with EMA filter)

3. BACKTEST RESULT TRACKING IMPROVEMENTS
   - Failed backtests now tracked and displayed with error messages
   - Failed backtests non-clickable with visual indicators
   - Backtest list sorted by execution time (most recent first)
   - Backend returns created_at timestamp for all backtests
   - Frontend parses timestamp from ID for backward compatibility

4. BACKTEST UI STREAMLINING
   - Modal closes immediately after submitting backtest
   - Progress tracked in Status Center instead of modal
   - Removed redundant progress step displays
   - Clean, distraction-free submission flow

5. DATA FETCHING FIX
   - Backtests now force-refresh data instead of using cache
   - Same-day date range handling fixed (sets end to 23:59:59)
   - Ensures fresh data for accurate backtest results

6. FRONTEND BUG FIXES
   - Fixed empty symbol dropdown (Select component :key workaround)
   - Fixed BreakoutScalping initialization (added **kwargs)
   - Fixed frontend crash on failed backtests (conditional rendering)

7. PHASE 2: BACKEND ROUTER ARCHITECTURE (2025-11-18)
   - Split main.py from 1,453 lines → 150 lines (90% reduction)
   - Created 8 modular routers in backend/api/routers/
   - Created backend/api/utils.py for SSE helpers
   - All 33 API routes registered successfully
   - No breaking changes - all endpoints maintained
   - Improved maintainability and testability

8. PHASE 3: FRONTEND SHARED UTILITIES (2025-11-18)
   - Created useFormatters composable (eliminates ~120 lines duplication)
   - Created LoadingSpinner component (eliminates ~200 lines duplication)
   - Created ErrorAlert component (eliminates ~150 lines duplication)
   - Created useAsyncData composable (standardizes async operations, ~250 lines)
   - Created useSymbols composable (centralized symbol fetching, ~80 lines)
   - Created EmptyState component (standardizes empty states)
   - Created usePredictionPolling composable (extracted polling logic)
   - Total: ~800 lines of duplication eliminated

9. PHASE 3 CONTINUED: APPLIED COMPOSABLES TO VIEWS (2025-11-18)
   - Refactored BacktestsView.vue (~100 lines eliminated)
   - Refactored ModelsView.vue (~42 lines eliminated)
   - Refactored PortfolioView.vue (~50 lines eliminated)
   - Split PredictionsView.vue: 881 → 197 lines (77% reduction)
   - Created 4 focused prediction components + composable
   - Total: ~870 lines of code improved/eliminated

HOW TO RUN
================================================================================

BACKEND:
cd backend
python -m uvicorn api.main:app --reload --host 0.0.0.0 --port 8000

FRONTEND:
cd frontend
npm run dev

Access:
- Frontend: http://localhost:5173
- Backend API: http://localhost:8000
- API Docs: http://localhost:8000/docs

RUNNING A BACKTEST:
1. Navigate to Backtests page
2. Click New Backtest
3. Select strategy, symbol, date range, initial capital
4. Click Run Backtest
5. Modal closes immediately
6. Monitor progress in Status Center (CPU chip icon in header)
7. Results appear in backtest list when complete

AVAILABLE STRATEGIES
================================================================================

1. MLPredictive - ML predictions with 90-95% pre-filter optimization
2. BreakoutScalping - Range breakout with EMA filter, 2:1 RR

TRADING PAIRS (19 total)
================================================================================

CRYPTO: BTC/USDT, ETH/USDT, BNB/USDT, SOL/USDT, ADA/USDT, DOT/USDT, MATIC/USDT, DOGE/USDT
FOREX: EUR/USD, GBP/USD, USD/JPY, AUD/USD, USD/CAD
INDICES: SPY, QQQ, DIA, NAS100, US30, GER40

DEVELOPMENT GUIDELINES
================================================================================

See CLAUDE.md and README.md for full documentation. Key points:

ADDING NEW SYMBOLS:
- Edit backend/domain/config/trading_pairs.py
- Frontend auto-updates (no changes needed)

ADDING NEW STRATEGIES:
- Create class in backend/domain/strategies/implementations/
- Inherit from Strategy base class
- Implement get_metadata() classmethod
- Auto-registers (no manual updates needed)

USING SHARED COMPOSABLES:
- useFormatters: Date, currency, number, percent formatting
- useAsyncData: Standardized async data fetching with loading/error states
- useSymbols: Centralized symbol fetching with caching and fallback
- LoadingSpinner: Reusable loading indicator (sm/md/lg sizes)
- ErrorAlert: Standardized error display (danger/warning/info variants)

================================================================================
END OF SESSION NOTES
================================================================================